<div class="container py-3">
  <div class="card">
    <div class="row">
      <div class="col-md-3">
        <%= link_to image_tag(deal.images.first, class: 'w-100'), deal_path(deal) %>
      </div>
      <div class="col-md-9">
        <div class="card-block">
          <div class="deal-heading">
            <h3 class="card-title"><%= link_to deal.title, deal_path(deal) %></h3>
            <span class="badge badge-primary badge-pill"><%= deal.category.name %></span>
          </div>
          <p class="card-text"><b>Description : </b><%= raw deal.description %></p>
          <p class="card-text"><b>Instructions : </b><%= deal.instructions %></p>
          <p class="card-text"><b>Price : </b><%= deal.price %></p>
          <%= form_tag(update_cart_orders_path(deal_id: deal, task: 'increment'), method: :put) do %>
            <div class="field">
              <%= label_tag 'Location', nil, class: 'col-form-label' %>
              <%= collection_select :location_id, :id, deal.locations.all, :id, :name, { prompt: true }, class: 'form-control', data: { type: 'select2-enabled' } %>
            </div>
            <div class="actions">
              <%= submit_tag "Add to cart", class: "btn btn-primary" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <div class="card-footer text-muted deal-card-footer">
      <span>Valid till <%= deal.expire_at.to_formatted_s(:long) %></span>
      <span>Can be redeemed in <%= deal.locations.map{ |location| location.name }.join(', ') %></span>
    </div>
  </div>
</div>
